# API ν‚¤ μ„λ²„ μ‚¬μ΄λ“ μ΄λ™ - μ™„λ£ μ‚¬ν•­

## β… λ³€κ²½ μ™„λ£ λ‚΄μ—­

### 1. μ„λ²„ μ‚¬μ΄λ“ API μ—”λ“ν¬μΈνΈ μƒμ„±
- **νμΌ**: `app/api/gemini/route.ts` (μƒλ΅ μƒμ„±)
- **κΈ°λ¥**: Gemini API νΈμ¶μ„ μ„λ²„ μ‚¬μ΄λ“μ—μ„ μ²λ¦¬
- **λ³΄μ•**: API ν‚¤λ¥Ό ν™κ²½ λ³€μ `GEMINI_API_KEY`μ—μ„λ§ μ½μ (ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶λμ§€ μ•μ)

### 2. ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μμ •
- **νμΌ**: `app/components/MathTutorDiagnostic.tsx`
  - `GeminiArgs` μΈν„°νμ΄μ¤μ—μ„ `apiKey` ν•„λ“ μ κ±°
  - `callGemini` ν•¨μκ°€ μ„λ²„ API (`/api/gemini`) νΈμ¶λ΅ λ³€κ²½
  - API ν‚¤ κ΄€λ ¨ state λ° λ΅μ§ μ κ±°
  - API ν‚¤ μ²΄ν¬ λ΅μ§ μ κ±°
  - κ°λ° ν™κ²½μ—μ„λ§ λ΅κΉ…λλ„λ΅ λ³€κ²½

### 3. μ„¤μ • νμ΄μ§€ μμ •
- **νμΌ**: `app/admin/settings/page.tsx`
  - API ν‚¤ μ…λ ¥ ν•„λ“ μ κ±°
  - Settings μΈν„°νμ΄μ¤μ—μ„ `geminiApiKey` ν•„λ“ μ κ±°
  - API ν‚¤ κ΄€λ ¨ λ΅μ§ μ κ±°
  - μ•λ‚΄ λ©”μ‹μ§€ μ¶”κ°€ (μ„λ²„ ν™κ²½ λ³€μλ΅ κ΄€λ¦¬λ¨μ„ μ•λ‚΄)

### 4. λ¶ν•„μ”ν• νμΌ μ κ±°
- **νμΌ**: `app/api/config/route.ts` μ‚­μ 
  - ν΄λΌμ΄μ–ΈνΈμ—μ„ API ν‚¤λ¥Ό κ°€μ Έμ¤λ μ—”λ“ν¬μΈνΈ μ κ±°

## π”§ μ„¤μ • λ°©λ²•

### λ΅μ»¬ κ°λ° ν™κ²½
`.env.local` νμΌμ— λ‹¤μ ν™κ²½ λ³€μ μ¶”κ°€:
```
GEMINI_API_KEY=your_api_key_here
```

### ν”„λ΅λ•μ… ν™κ²½ (Vercel)
1. Vercel λ€μ‹λ³΄λ“ > ν”„λ΅μ νΈ > Settings > Environment Variables
2. `GEMINI_API_KEY` ν™κ²½ λ³€μ μ¶”κ°€
3. κ°’ μ…λ ¥ ν›„ μ €μ¥

**μ¤‘μ”**: `NEXT_PUBLIC_` μ ‘λ‘μ‚¬ μ—†μ΄ `GEMINI_API_KEY`λ΅ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤. 
`NEXT_PUBLIC_` μ ‘λ‘μ‚¬κ°€ μμΌλ©΄ ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶λ©λ‹λ‹¤!

## π”’ λ³΄μ• κ°μ„  ν¨κ³Ό

### μ΄μ „ (λ¬Έμ μ )
- β API ν‚¤κ°€ ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ— ν¬ν•¨
- β API ν‚¤κ°€ LocalStorageμ— ν‰λ¬Έ μ €μ¥
- β API ν‚¤κ°€ URL μΏΌλ¦¬ νλΌλ―Έν„°λ΅ λ…Έμ¶
- β λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ—μ„ API ν‚¤ ν™•μΈ κ°€λ¥

### ν„μ¬ (κ°μ„ λ¨)
- β… API ν‚¤κ°€ μ„λ²„ μ‚¬μ΄λ“μ—μ„λ§ κ΄€λ¦¬
- β… API ν‚¤κ°€ ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶λμ§€ μ•μ
- β… API ν‚¤κ°€ URLμ— ν¬ν•¨λμ§€ μ•μ
- β… λΈλΌμ°μ €μ—μ„ API ν‚¤ ν™•μΈ λ¶κ°€λ¥

## π“ μ¶”κ°€ ν™•μΈ μ‚¬ν•­

### 1. ν™κ²½ λ³€μ μ„¤μ • ν™•μΈ
λ°°ν¬ μ „μ— λ‹¤μμ„ ν™•μΈν•μ„Έμ”:
- [ ] `.env.local` νμΌμ— `GEMINI_API_KEY` μ„¤μ • (λ΅μ»¬ κ°λ°)
- [ ] Vercel ν™κ²½ λ³€μμ— `GEMINI_API_KEY` μ„¤μ • (ν”„λ΅λ•μ…)
- [ ] ν™κ²½ λ³€μ μ΄λ¦„μ΄ `NEXT_PUBLIC_GEMINI_API_KEY`κ°€ μ•„λ‹ `GEMINI_API_KEY`μΈμ§€ ν™•μΈ

### 2. λ™μ‘ ν™•μΈ
- [ ] μμ—… ν™”λ©΄μ—μ„ λ©”μ‹μ§€ μ „μ†΅ μ‹ API νΈμ¶ μ„±κ³µ ν™•μΈ
- [ ] μ„λ²„ λ΅κ·Έμ—μ„ API ν‚¤κ°€ μ λ€λ΅ μ‚¬μ©λλ”μ§€ ν™•μΈ
- [ ] λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ—μ„ API ν‚¤κ°€ λ…Έμ¶λμ§€ μ•λ”μ§€ ν™•μΈ

## π¨ μ£Όμμ‚¬ν•­

1. **ν™κ²½ λ³€μ μ΄λ¦„ ν™•μΈ**
   - `NEXT_PUBLIC_GEMINI_API_KEY` β (ν΄λΌμ΄μ–ΈνΈ λ…Έμ¶)
   - `GEMINI_API_KEY` β… (μ„λ²„ μ „μ©)

2. **κΈ°μ΅΄ LocalStorage λ°μ΄ν„°**
   - κΈ°μ΅΄μ— μ €μ¥λ `gemini_api_key`λ” λ” μ΄μƒ μ‚¬μ©λμ§€ μ•μµλ‹λ‹¤
   - ν•„μ”μ‹ λΈλΌμ°μ €μ—μ„ μ‚­μ ν•  μ μμµλ‹λ‹¤

3. **μ—λ¬ μ²λ¦¬**
   - API ν‚¤κ°€ μ„¤μ •λμ§€ μ•μ€ κ²½μ° μ„λ²„μ—μ„ μ—λ¬ λ°ν™
   - ν΄λΌμ΄μ–ΈνΈμ—μ„ μΉμ ν• μ—λ¬ λ©”μ‹μ§€ ν‘μ‹

## π”„ λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“

κΈ°μ΅΄ μ‚¬μ©μ λ°μ΄ν„°κ°€ μλ” κ²½μ°:
1. LocalStorageμ `gemini_api_key`λ” λ¬΄μ‹λ¨
2. μ„λ²„ ν™κ²½ λ³€μμ— API ν‚¤ μ„¤μ • ν•„μ”
3. κΈ°μ΅΄ μ„¤μ •μ€ μλ™μΌλ΅ λ§μ΄κ·Έλ μ΄μ…λ¨ (API ν‚¤ ν•„λ“λ§ μ κ±°)

---

**μ™„λ£μΌ**: 2025λ…„ 11μ›”  
**λ³΄μ• λ λ²¨**: Critical β†’ ν•΄κ²°λ¨ β…

